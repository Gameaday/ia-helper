# ============================================================================
# Gradle Properties - Optimized for Flutter Android Builds
# ============================================================================

# JVM Arguments - Optimized for CI and local builds
# Increased heap size to 4G for CI builds (GitHub Actions has 7GB available)
# Added GC optimizations to prevent out-of-memory errors during native lib processing
org.gradle.jvmargs=-Xmx4G -Xms512m -XX:MaxMetaspaceSize=1024m -XX:+UseG1GC -XX:+HeapDumpOnOutOfMemoryError -Dfile.encoding=UTF-8 --add-opens=java.base/java.lang=ALL-UNNAMED

# ============================================================================
# Performance Optimizations
# ============================================================================

# Enable Gradle build cache for faster incremental builds
org.gradle.caching=true

# Enable Gradle daemon for faster builds (reuse JVM across builds)
org.gradle.daemon=true

# CRITICAL: Disable parallel builds for Flutter
# Flutter's build process doesn't benefit from parallel execution and causes
# multiple simultaneous invocations, duplicate tree-shaking, and file watcher conflicts
org.gradle.parallel=false

# Enable configuration on demand (only configure projects that are needed)
org.gradle.configureondemand=true

# ============================================================================
# Android Configuration
# ============================================================================

android.useAndroidX=true
android.enableJetifier=true

# Enable non-transitive R class for faster builds and smaller APK
android.nonTransitiveRClass=true

# Disable non-final resource IDs (improves build performance)
android.nonFinalResIds=false

# Enable BuildConfig generation
android.defaults.buildfeatures.buildconfig=true

# ============================================================================
# Build Feature Optimization - Disable unused features
# ============================================================================

# Disable unnecessary build features for faster builds
android.defaults.buildfeatures.aidl=false
android.defaults.buildfeatures.renderscript=false
# Enable resValues - required for product flavor custom resource values (app_name)
android.defaults.buildfeatures.resvalues=true
android.defaults.buildfeatures.shaders=false

# ============================================================================
# Kotlin Configuration
# ============================================================================

# Enable Kotlin incremental compilation
kotlin.incremental=true
kotlin.incremental.js=true

# ============================================================================
# R8/ProGuard Configuration
# ============================================================================

# Enable R8 code shrinker for optimized release builds
android.enableR8=true
android.enableR8.fullMode=true

# ============================================================================
# Flutter Configuration
# ============================================================================

# Note: org.gradle.java.home is removed - let Gradle use JAVA_HOME from environment
# This makes builds work on both local (Windows) and CI (Linux)
# Local: Set JAVA_HOME in your environment or use IntelliJ/Android Studio's bundled JDK
# CI: GitHub Actions sets JAVA_HOME via setup-java action

flutter.versionCode=1
flutter.versionName=1.0.0